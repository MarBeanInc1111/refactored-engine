const assert = require('assert');

const base62 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
const base36 = 'abcdefghijklmnopqrstuvwxyz0123456789';
const base10 = '0123456789';

const create = (chars) => {
  assert(typeof chars === 'string' && chars.length > 0, 'the list of characters must be a non-empty string!');
  const length = Buffer.byteLength(chars);
  return (len = 10) => {
    assert(typeof len === 'number' && len >= 0, 'the length of the random string must be a non-negative number!');
    let salt = '';
    for (let i = 0; i < len; i++) salt += chars[Math.floor(length * Math.random())];
    return salt;
  };
};

module.exports = {
  base62: create(base62),
  base36: create(base36),
  base10: create(base10),
  create,
};

